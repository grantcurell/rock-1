[Unit]
 Description = Lighttpd Container Service
 
 Wants    = network.target
 Requires = docker.service
 
 [Service]
 Type = simple
 
 ExecStartPre = /usr/sbin/iptables -I INPUT 1 -p tcp --dport {{ lighttpd_firewall_port }} -j ACCEPT
 ExecStart = /usr/bin/docker-compose -f {{ rocknsm_dir }}/lighttpd/lighttpd-compose.yml up
 
 ExecStop  = /usr/bin/docker-compose -f {{ rocknsm_dir }}/lighttpd/lighttpd-compose.yml down -v
 ExecStop = /usr/sbin/iptables -D INPUT -p tcp --dport {{ lighttpd_firewall_port }} -j ACCEPT
 
 [Install]
 WantedBy = multi-user.target
