---
- name: Install Signing Key
  command: rpm --import https://packages.elastic.co/GPG-KEY-elasticsearch

- name: Configure Repository
  command: echo -e '[curator-5]\nname=CentOS/RHEL 7 repository for Elasticsearch Curator 5.x packages\nbaseurl=https://packages.elastic.co/curator/5/centos/7\npgkey=https://packages.elastic.co/GPG-KEY-elasticsearch\nenabled=1' >> /etc/yum.repos.d/curator.repo

- name: Install Elasticsearch Curator
  command: yum install -y elasticsearch-curator

- name: Create Elasticsearch Curator configuration file
  command: mkdir ~/.curator
  command: echo -e "---\nclient: \n hosts: \n  - 127.0.0.1\n port: 9200\n url_prefix:\n use_ssl: False\n certificate: \n client_cert: \n client_key: \n ssl_no_validate: False\n http_auth: \n timeout: 30\n master_only: False\n\nlogging: \n loglevel: INFO\n logfile: \n logformat: default\n blacklist: ['elasticsearch', 'urllib3']" >> ~/.curator/curator.yml >> ~/.curator/curator.yml
